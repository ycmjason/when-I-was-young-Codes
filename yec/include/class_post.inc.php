<?phpclass post{	public $pid,$ptitle,$pcontent,$ptimestamp,$pevent,$pemail,$pnum=1;	public function __construct($pid,$pevent=NULL,$page=NULL,$ppp=0){		GLOBAL $mysqli;		if($pid==0){			$sql="SELECT * FROM `yec_post`";			if(isset($pevent)){				$sql.=" WHERE `pevent`='";				$sql.=($pevent==1)?"1":"0";				$sql.="'";			}			$sql.=" ORDER BY `pid` DESC";			if($page>=0&&$ppp>0){				$sql.=" LIMIT ";				$sql.=$page*$ppp;				$sql.=" , ";				$sql.=$ppp+$page*$ppp;			}			$rs=$mysqli->query($sql);			$num=$rs->num_rows;			$this->pnum=$num;            $replace=array("\\n","\\r");			for($i=0;$i<$num;$i++){				$row=$rs->fetch_assoc();				$this->pid[$i]		 =$row['pid'];				$this->ptitle[$i]	 =stripslashes(str_replace($replace,"",$row['ptitle']));				$this->pcontent[$i]	 =stripslashes(str_replace($replace,"",$row['pcontent']));				$this->ptimestamp[$i]=$row['ptimestamp'];				$this->pevent[$i]	 =$row['pevent'];				$this->pemail[$i]	 =$row['pemail'];			}		}else{			$this->pid[0]=$pid;			$sql="SELECT * FROM `yec_post` WHERE `pid`=".intval($pid).";";			$rs=$mysqli->query($sql);			$row=$rs->fetch_assoc();			            $replace=array("\\n","\\r");            $this->ptitle[0]	 =stripslashes(str_replace($replace,"",$row['ptitle']));            $this->pcontent[0]	 =stripslashes(str_replace($replace,"",$row['pcontent']));			$this->ptimestamp[0]=$row['ptimestamp'];			$this->pevent[0]	 =$row['pevent'];			$this->pemail[0]	 =$row['pemail'];		}	}	public function isjoint($yid,$pid){		GLOBAL $mysqli;		$sql="SELECT * FROM  `yec_eventapply` WHERE `pid`=".intval($pid)."&&`yid`=".intval($yid).";";		$rs=$mysqli->query($sql);		$num=$rs->num_rows;		if($num>0){			return 1;		}else{			return 0;		}	}}/*class post{	public $pid,$ptitle,$pcontent,$ptimestamp,$pevent,$pemail,$pnum=1,$pattm,$pattmname;	public function __construct($pid,$pevent=NULL,$page=NULL,$ppp=0){		GLOBAL $mysqli;		if($pid==0){			$sql="SELECT * FROM `yec_post`";			if(isset($pevent)){				$sql.=" WHERE `pevent`='";				$sql.=($pevent==1)?"1":"0";				$sql.="'";			}			$sql.=" ORDER BY `pid` DESC";			if($page>=0&&$ppp>0){				$sql.=" LIMIT ";				$sql.=$page*$ppp;				$sql.=" , ";				$sql.=$ppp+$page*$ppp;			}			$rs=$mysqli->query($sql);			$num=$rs->num_rows;			$this->pnum=$num;			for($i=0;$i<$num;$i++){				$row=$rs->fetch_assoc();				$this->pid[$i]		 =$row['pid'];				$this->ptitle[$i]	 =stripslashes($row['ptitle']);				$this->pcontent[$i]	 =stripslashes($row['pcontent']);				$this->ptimestamp[$i]=$row['ptimestamp'];				$this->pevent[$i]	 =$row['pevent'];				$this->pemail[$i]	 =$row['pemail'];				$sql="SELECT `aname`,`apath` FROM `yec_postAttachment` WHERE `pid`='".$this->pid[$i]."'";				$rs2=$mysqli->query($sql);				while($row2=$rs2->fetch_assoc()){					$this->pattmname[$i][]=$row2[0];					$this->pattm[$i][]=$row2[1];				}			}			$sql="";		}else{			$this->pid[0]=$pid;			$sql="SELECT * FROM `yec_post` WHERE `pid`=".intval($pid).";";			$rs=$mysqli->query($sql);			$row=$rs->fetch_assoc();			$this->ptitle[0]	 =stripslashes($row['ptitle']);			$this->pcontent[0]	 =stripslashes($row['pcontent']);			$this->ptimestamp[0]=$row['ptimestamp'];			$this->pevent[0]	 =$row['pevent'];			$this->pemail[0]	 =$row['pemail'];			$sql="SELECT `aname`,`apath` FROM `yec_postAttachment` WHERE `pid`='".$this->pid[0]."'";			$rs=$mysqli->query($sql);			while($row=$rs->fetch_row()){				$this->pattmname[0][]=$row[0];				$this->pattm[0][]=$row[1];			}		}	}	public function isjoint($yid,$pid){		GLOBAL $mysqli;		$sql="SELECT * FROM  `yec_eventapply` WHERE `pid`=".intval($pid)."&&`yid`=".intval($yid).";";		$rs=$mysqli->query($sql);		$num=$rs->num_rows;		if($num>0){			return 1;		}else{			return 0;		}	}}?>*/?>